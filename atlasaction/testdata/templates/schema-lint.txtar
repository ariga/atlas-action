# no errors
render-schema-lint schema-lint.tmpl data-0.json
cmp stdout golden-0.html

# file with 2 issues
render-schema-lint schema-lint.tmpl data-2.json
cmp stdout golden-2.html

-- data-0.json --
{"Steps":[]}

-- golden-0.html --
<h3> Schema Lint Report</h3>
<hr/>
<div align="center">
  <picture>
    <source media="(prefers-color-scheme: light)" srcset="https://release.ariga.io/images/assets/success.svg?v=1">
    <img width="24px" height="24px" src="https://release.ariga.io/images/assets/success.svg?v=1"/>
  </picture>
  <br/>
  <b>Success</b> â€” No issues found, your schema is valid! ðŸŽ‰
</div>
-- data-2.json --
{"Steps":[{"Text":"naming violations detected","Diagnostics":[{"Pos":{"Filename":"schema.lt.hcl","Start":{"Line":1,"Column":1,"Byte":0},"End":{"Line":1,"Column":7,"Byte":6}},"Text":"Table \"t1\" violates the naming policy","Code":"NM102"},{"Pos":{"Filename":"schema.lt.hcl","Start":{"Line":5,"Column":1,"Byte":40},"End":{"Line":5,"Column":7,"Byte":46}},"Text":"Table \"t2\" violates the naming policy","Code":"NM102"}]},{"Text":"rule \"primary-key-required\"","Desc":"All tables must have a primary key","Diagnostics":[{"Pos":{"Filename":"schema.lt.hcl","Start":{"Line":3,"Column":1,"Byte":20},"End":{"Line":3,"Column":6,"Byte":25}},"Text":"Table t1 must have a primary key"}]}]}

-- golden-2.html --
<h3> Schema Lint Report</h3>
<hr/>
<table>
  <thead>
    <tr>
      <th>Status</th>
      <th>Step</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <div align="center">
          <picture>
            <source media="(prefers-color-scheme: light)" srcset="https://release.ariga.io/images/assets/error.svg?v=1">
            <img width="20px" height="20px" src="https://release.ariga.io/images/assets/error.svg?v=1"/>
          </picture>
        </div>
      </td>
      <td><b>naming violations detected</b></td>
      <td>
        Table "t1" violates the naming policy <a href="https://atlasgo.io/lint/analyzers#NM102" target="_blank">(NM102)</a><br/>
        Table "t2" violates the naming policy <a href="https://atlasgo.io/lint/analyzers#NM102" target="_blank">(NM102)</a><br/>
      </td>
    </tr>
    <tr>
      <td>
        <div align="center">
          <picture>
            <source media="(prefers-color-scheme: light)" srcset="https://release.ariga.io/images/assets/error.svg?v=1">
            <img width="20px" height="20px" src="https://release.ariga.io/images/assets/error.svg?v=1"/>
          </picture>
        </div>
      </td>
      <td><b>rule "primary-key-required"</b></td>
      <td>
        Table t1 must have a primary key<br/>
      </td>
    </tr>
  </tbody>
</table>