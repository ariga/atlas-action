---

{{- if .Error }}
## âŒ Migration Failed
{{- else }}
## âœ… Migration Passed
{{- end }}

#### `atlas migrate apply` Summary:

<table>
    <tr>
        <th>Parameter</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Migration Directory</td>
        <td><code>{{ .Dir }}</code></td>
    </tr>
    <tr>
        <td>Database URL</td>
        <td><code>{{ .URL.URL }}</code></td>
    </tr>
    {{- if .Current }}
    <tr>
        <td>Migrate from Version</td>
        <td><code>{{ .Current }}</code></td>
    </tr>
    {{- end }}
    <tr>
        <td>Migrate to Version</td>
       <td>
        <code>{{- if .Target }}{{ .Target }}{{- else }}{{ .Current }}{{- end }}</code>
       </td>
    </tr>
    <tr>
        <td>SQL Summary</td>
        <td>{{ len .Applied }} migration file{{- if or (not .Applied) (gt (len .Applied) 1) }}s{{- end }}
        {{- if sumAppliedStatements . }}, {{ sumAppliedStatements . }} statement{{- if gt (sumAppliedStatements .) 1 }}s{{- end }} passed {{- end }} {{- if .Error }}, 1 failed{{- end }}</td>
    </tr>
    <tr>
        <td>Total Time</td>
        <td>{{ execTime .Start .End }}</td>
    </tr>
</table>

{{- range .Applied }}

#### Version {{ .Name }}:
<table>
    <tr>
        <th>Status</th>
        <th>Executed Statements</th>
        <th>Execution Time</th>
        <th>Error</th>
        <th>Error Statement</th>
    </tr>
    <tr>
        <td>{{ if .Error }}âŒ{{ else }}âœ…{{ end }}</td>
        <td>{{ len .Applied }}</td>
        <td>{{ execTime .Start .End }}</td>
        <td>{{ if .Error }}{{ .Error.Error }}{{ else }}-{{ end }}</td>
        <td>{{ if .Error }}<details><summary>ğŸ“„ View</summary><pre><code>{{ .Error.SQL }}</code></pre></details>{{ else }}-{{ end }}</td>
    </tr>
</table>

<details>
<summary>ğŸ“„ View SQL Statements</summary>

```sql
{{- range .Applied }}
{{ . }}
{{- end }}
```
</details>

{{ end }}
