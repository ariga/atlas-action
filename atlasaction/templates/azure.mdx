---
title: Automate Database CI/CD with Azure DevOps
id: azure-devops
slug: /integrations/azure-devops
description: Learn how to use Azure DevOps to automate database schema migrations with Atlas. This guide covers setup, testing, linting, deploying, and integrating Atlas into your CI/CD workflows for SQL Server, MySQL, PostgreSQL, SQLite, and more.
keywords: [azure-devops, ci/cd, database migrations, atlas, mysql, postgresql, sqlite, schema management, devops, continuous integration, continuous deployment]
---

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

Atlas provides an [Azure DevOps extension](https://marketplace.visualstudio.com/items?itemName=Ariga.atlas-action) with the `AtlasAction` task to run actions on Azure Pipelines. We recommend setting the `githubConnection` input to allow the task to report results to GitHub.

This guide will walk you through the setup for using AtlasAction with Azure DevOps. In each example, `$(ATLAS_TOKEN)` is the secret that holds the Atlas Token to authenticate with Atlas Cloud.

To access the outputs generated by the task, you need to name your steps in the pipeline. See how to [access task outputs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-output-variables-from-tasks).

{{ range .Actions }}
## `{{ .ID | replace "/" " " }}`

{{ .Description }}

{{ $tmpl := printf "usage/azure-devops/%s" .ID -}}
{{- if hasTemplate $tmpl -}}
### Usage

Add `azure-pipelines.yml` to your repo with the following contents:
{{ xtemplate $tmpl . -}}
{{- end -}}
{{- if .Inputs }}
### Inputs

* `action` - (Required) Always `{{ .ID | replace "/" " " }}`.
* `githubConnection` - (Optional) The connection to GitHub.
{{- range $name, $item := .SortedInputs }}
* `{{ $name | replace "-" "_" }}` - {{ if not $item.Required }}(Optional) {{end}}{{ $item.Description | trimnl | nl2sp }}
{{- end }}
{{ end -}}
{{- if .Outputs }}
### Outputs

The `AtlasAction` task will generate the following outputs for this action:
{{ $action := . -}}
{{- range $name, $item := .SortedOutputs }}
* `{{ $name | replace "-" "_" }}` - {{ $item.Description | trimnl | nl2sp }}
{{- end -}}
{{- end }}
{{ end -}}

{{- define "usage/azure-devops/migrate/apply" }}
**Deploy a directory from the git repository**
```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  inputs:
    action: '{{ .ID | replace "/" " " }}' # Required
    url: $(DatabaseURL)
    dir: 'file://migrations'
```

**Deploy a directory from the cloud**
```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  inputs:
    action: '{{ .ID | replace "/" " " }}' # Required
    url: $(DatabaseURL)
    dir: 'atlas://my-project'
```

{{ end -}}

{{- define "usage/azure-devops/migrate/push" }}
<Tabs
defaultValue="mysql"
values={[
{{- range $item := dockers }}
  {label: "{{ $item.Label }}", value: "{{ $item.Driver }}"},
{{- end }}
]}>

{{- $action := . -}}
{{- range $item := dockers }}
<TabItem value="{{ $item.Driver }}">

```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  inputs:
    action: 'migrate push' # Required
    dir_name: 'my-project'
    env: 'ci'
    dev_url: '{{ $item.DevURL }}'
    githubConnection: '<Connection to your GitHub>'
```

</TabItem>
{{- end }}
</Tabs>
{{ end -}}

{{- define "usage/azure-devops/migrate/lint" }}
<Tabs
defaultValue="mysql"
values={[
{{- range $item := dockers }}
  {label: "{{ $item.Label }}", value: "{{ $item.Driver }}"},
{{- end }}
]}>

{{- $action := . -}}
{{- range $item := dockers }}
<TabItem value="{{ $item.Driver }}">

```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  inputs:
    action: 'migrate lint' # Required
    dir_name: 'my-project'
    env: 'ci'
    dev_url: '{{ $item.DevURL }}'
    githubConnection: '<Connection to your GitHub>'
```

</TabItem>
{{- end }}
</Tabs>
{{ end -}}

{{- define "usage/azure-devops/schema/plan" }}
<Tabs
defaultValue="mysql"
values={[
{{- range $item := dockers }}
  {label: "{{ $item.Label }}", value: "{{ $item.Driver }}"},
{{- end }}
]}>

{{- $action := . -}}
{{- range $item := dockers }}
<TabItem value="{{ $item.Driver }}">

```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  inputs:
    action: 'schema plan' # Required
    dev_url: '{{ $item.DevURL }}'
    env: 'ci'
```

</TabItem>
{{- end }}
</Tabs>
{{ end -}}

{{- define "usage/azure-devops/schema/plan/approve" }}
```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  inputs:
    action: '{{ .ID | replace "/" " " }}' # Required
    env: 'ci'
```

{{ end -}}
{{- define "usage/azure-devops/schema/push" }}
```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  name: PushSchema
  inputs:
    action: '{{ .ID | replace "/" " " }}' # Required
    env: 'ci'
    latest: true
- displayName: Print the URL of schema
  script: echo "Pushed schema to $(PushSchema.link)"
```

{{ end -}}
{{- define "usage/azure-devops/schema/apply" }}
```yaml
trigger:
- master
pool:
  vmImage: ubuntu-latest
steps:
- script: curl -sSf https://atlasgo.sh | sh
  displayName: Install Atlas
- script: atlas login --token $(ATLAS_TOKEN)
  displayName: Atlas Login
- task: AtlasAction@1
  name: ApplySchema
  inputs:
    action: '{{ .ID | replace "/" " " }}' # Required
    env: 'ci'
```

{{ end -}}